# Ä°KYS Teknik Rapor v1.0
## Personel ve Departman YÃ¶netimi ModÃ¼lleri

**Proje:** Ä°nsan KaynaklarÄ± YÃ¶netim Sistemi (Ä°KYS)  
**Rapor Tarihi:** 28 AÄŸustos 2025  
**Rapor Versiyonu:** 1.0  
**Kapsam:** Personel ve Departman YÃ¶netimi ModÃ¼lleri  

---

## ğŸ“‹ Ã–zet

Bu rapor, Ä°KYS projesinin ilk aÅŸamasÄ±nda geliÅŸtirilen Personel ve Departman YÃ¶netimi modÃ¼llerinin teknik detaylarÄ±nÄ± iÃ§ermektedir. Her iki modÃ¼l de tam CRUD iÅŸlevselliÄŸi ile tamamlanmÄ±ÅŸ ve test edilmiÅŸtir.

## ğŸ—ï¸ Teknik Mimari

### Katman YapÄ±sÄ±
```
Ä°KYS/
â”œâ”€â”€ DAL (Data Access Layer)      # Veri eriÅŸim katmanÄ±
â”‚   â”œâ”€â”€ Context/                 # Entity Framework DbContext
â”‚   â”œâ”€â”€ Entities/                # Veri modeli sÄ±nÄ±flarÄ±
â”‚   â”œâ”€â”€ Configurations/          # Fluent API konfigÃ¼rasyonlarÄ±
â”‚   â”œâ”€â”€ Repositories/            # Repository pattern implementasyonu
â”‚   â””â”€â”€ Migrations/              # VeritabanÄ± migration'larÄ±
â”œâ”€â”€ BLL (Business Logic Layer)   # Ä°ÅŸ mantÄ±ÄŸÄ± katmanÄ±
â”‚   â”œâ”€â”€ DTOs/                    # Data Transfer Objects
â”‚   â”œâ”€â”€ Services/                # Ä°ÅŸ mantÄ±ÄŸÄ± servisleri
â”‚   â”œâ”€â”€ Mapping/                 # AutoMapper profilleri
â”‚   â””â”€â”€ Utilities/               # YardÄ±mcÄ± sÄ±nÄ±flar
â””â”€â”€ MVC (Presentation Layer)     # Sunum katmanÄ±
    â”œâ”€â”€ Controllers/             # MVC Controller'larÄ±
    â”œâ”€â”€ Models/                  # View Model'leri
    â”œâ”€â”€ Views/                   # Razor View'larÄ±
    â”œâ”€â”€ Mapping/                 # ViewModel mapping'leri
    â””â”€â”€ wwwroot/                 # Statik dosyalar
```

### KullanÄ±lan Teknolojiler
- **Framework:** ASP.NET Core MVC 8.0
- **ORM:** Entity Framework Core 8.0.8
- **Database:** SQL Server LocalDB
- **Mapping:** AutoMapper 12.0.1
- **UI:** Bootstrap 5.x + Font Awesome 6.0.0
- **Pattern:** Repository + UnitOfWork + DTO + Result Pattern

## ğŸ“Š Veri Modeli

### Entity Ä°liÅŸkileri

#### Department Entity
```csharp
public class Department : BaseEntity
{
    public string Name { get; set; }                    // Departman adÄ±
    public string? Description { get; set; }            // AÃ§Ä±klama
    public int? ParentDepartmentId { get; set; }        // Ãœst departman FK
    
    // Navigation Properties
    public Department? ParentDepartment { get; set; }
    public ICollection<Department> SubDepartments { get; set; }
    public ICollection<Person> Employees { get; set; }
}
```

#### Person Entity
```csharp
public class Person : BaseEntity
{
    // Kimlik Bilgileri
    public string TcKimlikNo { get; set; }              // TC Kimlik (Unique)
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string? FatherName { get; set; }
    public string? MotherName { get; set; }
    public DateTime? BirthDate { get; set; }
    
    // Ä°letiÅŸim Bilgileri
    public string? Email { get; set; }
    public string? Phone { get; set; }
    public string? Address { get; set; }
    
    // Ä°ÅŸ Bilgileri
    public string? EmployeeNumber { get; set; }
    public DateTime? HireDate { get; set; }
    public decimal? Salary { get; set; }
    public string? Position { get; set; }
    public int? DepartmentId { get; set; }              // Departman FK
    
    // KiÅŸisel Bilgiler
    public string? MaritalStatus { get; set; }
    public string? BloodType { get; set; }
    public string? Religion { get; set; }
    public string? MilitaryStatus { get; set; }
    public string? DriverLicenseClass { get; set; }
    
    // SSK Bilgileri
    public string? SskNumber { get; set; }
    public DateTime? SskStartDate { get; set; }
    
    // Navigation Properties
    public Department? Department { get; set; }
}
```

#### BaseEntity
```csharp
public abstract class BaseEntity
{
    public int Id { get; set; }
    public DateTime CreatedAt { get; set; }
    public DateTime? UpdatedAt { get; set; }
    public bool IsActive { get; set; }
}
```

### VeritabanÄ± KÄ±sÄ±tlamalarÄ±
- **TC Kimlik No:** Unique constraint, 11 karakter
- **Department Name:** Required, max 100 karakter
- **Person FirstName/LastName:** Required, max 50 karakter
- **Email:** Email format validation
- **Foreign Keys:** Department-Person iliÅŸkisi (SET NULL on delete)
- **Self-Reference:** Department parent-child (RESTRICT on delete)

## ğŸ”§ Implementasyon DetaylarÄ±

### 1. Repository Pattern

#### Generic Repository
```csharp
public interface IRepository<TEntity> where TEntity : class
{
    Task<TEntity?> GetByIdAsync(int id);
    Task<IEnumerable<TEntity>> GetAllAsync();
    Task<IEnumerable<TEntity>> FindAsync(Expression<Func<TEntity, bool>> predicate);
    Task AddAsync(TEntity entity);
    void Update(TEntity entity);
    void Remove(TEntity entity);
}
```

#### Specialized Repositories
```csharp
public interface IPersonRepository : IRepository<Person>
{
    Task<Person?> GetByTcKimlikNoAsync(string tcKimlikNo);
    Task<IEnumerable<Person>> GetByDepartmentIdAsync(int departmentId);
    Task<IEnumerable<Person>> GetActiveEmployeesAsync();
}

public interface IDepartmentRepository : IRepository<Department>
{
    Task<IEnumerable<Department>> GetRootDepartmentsAsync();
    Task<IEnumerable<Department>> GetSubDepartmentsAsync(int parentId);
}
```

### 2. Unit of Work Pattern

```csharp
public interface IUnitOfWork : IDisposable
{
    IPersonRepository Persons { get; }
    IDepartmentRepository Departments { get; }
    
    Task<int> SaveChangesAsync();
    Task BeginTransactionAsync();
    Task CommitTransactionAsync();
    Task RollbackTransactionAsync();
}
```

### 3. Service Layer

#### Result Pattern
```csharp
public class Result<T>
{
    public bool Success { get; set; }
    public string Message { get; set; }
    public T? Data { get; set; }
    public List<string> Errors { get; set; }
}
```

#### Service Interface Ã–rneÄŸi
```csharp
public interface IPersonService
{
    Task<Result<IEnumerable<PersonListDto>>> GetAllAsync();
    Task<Result<PersonDetailDto>> GetByIdAsync(int id);
    Task<Result<PersonDetailDto>> CreateAsync(PersonCreateDto dto);
    Task<Result<PersonDetailDto>> UpdateAsync(PersonUpdateDto dto);
    Task<Result> DeleteAsync(int id);
}
```

### 4. DTO YapÄ±sÄ±

Her entity iÃ§in 4 farklÄ± DTO:
- **ListDto:** Liste gÃ¶rÃ¼nÃ¼mÃ¼ iÃ§in minimal veri
- **DetailDto:** Detay gÃ¶rÃ¼nÃ¼mÃ¼ iÃ§in tam veri
- **CreateDto:** Yeni kayÄ±t oluÅŸturma iÃ§in gerekli alanlar
- **UpdateDto:** GÃ¼ncelleme iÃ§in tÃ¼m alanlar + Id

### 5. AutoMapper KonfigÃ¼rasyonu

```csharp
// Entity â†” DTO Mapping
CreateMap<Person, PersonListDto>()
    .ForMember(dest => dest.DepartmentName, 
               opt => opt.MapFrom(src => src.Department != null ? src.Department.Name : null));

CreateMap<PersonCreateDto, Person>()
    .ForMember(dest => dest.Id, opt => opt.Ignore())
    .ForMember(dest => dest.CreatedAt, opt => opt.Ignore());

// DTO â†” ViewModel Mapping
CreateMap<PersonListDto, PersonListViewModel>();
CreateMap<PersonCreateViewModel, PersonCreateDto>();
```

## ğŸ¨ KullanÄ±cÄ± ArayÃ¼zÃ¼

### Sayfa YapÄ±sÄ±

#### Personel ModÃ¼lÃ¼
1. **Index (/Person):** Personel listesi tablosu
2. **Create (/Person/Create):** Yeni personel formu
3. **Edit (/Person/Edit/{id}):** Personel dÃ¼zenleme formu
4. **Details (/Person/Details/{id}):** Personel detay sayfasÄ±
5. **Delete (/Person/Delete/{id}):** Silme onay sayfasÄ±

#### Departman ModÃ¼lÃ¼
1. **Index (/Department):** HiyerarÅŸik departman listesi
2. **Tree (/Department/Tree):** Expandable aÄŸaÃ§ gÃ¶rÃ¼nÃ¼mÃ¼
3. **Create (/Department/Create):** Yeni departman formu
4. **Edit (/Department/Edit/{id}):** Departman dÃ¼zenleme formu
5. **Details (/Department/Details/{id}):** Departman detay sayfasÄ±
6. **Delete (/Department/Delete/{id}):** Silme onay sayfasÄ±
7. **Employees (/Department/Employees/{id}):** Departman personelleri

### UI Ã–zellikleri
- **Responsive Design:** Bootstrap 5 grid sistemi
- **Icon Integration:** Font Awesome 6.0.0
- **Status Badges:** Aktif/Pasif durum gÃ¶sterimi
- **Action Buttons:** CRUD iÅŸlemleri iÃ§in buton gruplarÄ±
- **Dropdown Navigation:** HiyerarÅŸik menÃ¼ yapÄ±sÄ±
- **Form Validation:** Client-side ve server-side validation
- **Success/Error Messages:** TempData ile bildirimler

### HiyerarÅŸik Departman GÃ¶rÃ¼nÃ¼mÃ¼

#### Liste GÃ¶rÃ¼nÃ¼mÃ¼
```
Ä°nsan KaynaklarÄ± (3 personel)
    â†’ Ä°K UzmanlarÄ± (2 personel)
    â†’ Ä°K MÃ¼dÃ¼rlÃ¼ÄŸÃ¼ (1 personel)
Bilgi Ä°ÅŸlem (5 personel)
    â†’ YazÄ±lÄ±m GeliÅŸtirme (3 personel)
    â†’ Sistem YÃ¶netimi (2 personel)
```

#### AÄŸaÃ§ GÃ¶rÃ¼nÃ¼mÃ¼
- Expandable/collapsible nodes
- Recursive rendering
- Visual hierarchy with indentation
- Icon differentiation (folder/folder-open)

## ğŸ”’ GÃ¼venlik ve Validasyon

### Model Validation
```csharp
[Required(ErrorMessage = "TC Kimlik No zorunludur")]
[StringLength(11, MinimumLength = 11, ErrorMessage = "TC Kimlik No 11 haneli olmalÄ±dÄ±r")]
public string TcKimlikNo { get; set; }

[EmailAddress(ErrorMessage = "GeÃ§erli bir e-posta adresi giriniz")]
public string? Email { get; set; }

[Range(0, double.MaxValue, ErrorMessage = "MaaÅŸ 0'dan bÃ¼yÃ¼k olmalÄ±dÄ±r")]
public decimal? Salary { get; set; }
```

### Ä°ÅŸ KurallarÄ±
1. **TC Kimlik No Uniqueness:** Duplicate kontrolÃ¼
2. **Department Hierarchy:** Circular reference engeli
3. **Cascade Delete Rules:** 
   - Department â†’ Person: SET NULL
   - Parent Department â†’ Child: RESTRICT
4. **Soft Delete:** IsActive flag ile
5. **Audit Trail:** CreatedAt/UpdatedAt otomatik gÃ¼ncelleme

### Hata YÃ¶netimi
```csharp
try
{
    var result = await _personService.CreateAsync(dto);
    if (!result.Success)
    {
        TempData["Error"] = result.Message;
        foreach (var error in result.Errors)
        {
            ModelState.AddModelError("", error);
        }
    }
}
catch (Exception ex)
{
    TempData["Error"] = "Beklenmeyen bir hata oluÅŸtu.";
    // Logging implementation
}
```

## ğŸ“ˆ Performans Metrikleri

### VeritabanÄ±
- **Tablo SayÄ±sÄ±:** 2 (Persons, Departments)
- **Index SayÄ±sÄ±:** 3
  - Persons.TcKimlikNo (Unique)
  - Persons.DepartmentId (Foreign Key)
  - Departments.ParentDepartmentId (Foreign Key)
- **Seed Data:** 3 departman, 1 personel

### Kod Metrikleri
```
Toplam Dosya SayÄ±sÄ±: ~35
â”œâ”€â”€ Controllers: 2 sÄ±nÄ±f (Person, Department)
â”œâ”€â”€ Services: 4 sÄ±nÄ±f (2 interface + 2 implementation)
â”œâ”€â”€ Repositories: 8 sÄ±nÄ±f (4 interface + 4 implementation)
â”œâ”€â”€ DTOs: 8 sÄ±nÄ±f
â”œâ”€â”€ ViewModels: 10 sÄ±nÄ±f
â”œâ”€â”€ Views: 11 dosya
â””â”€â”€ Configurations: 2 sÄ±nÄ±f
```

### Response Time (Local Test)
- **Liste SayfalarÄ±:** ~50-100ms
- **Detay SayfalarÄ±:** ~30-80ms
- **CRUD Ä°ÅŸlemleri:** ~100-200ms
- **HiyerarÅŸik AÄŸaÃ§:** ~80-150ms

## ğŸ§ª Test SenaryolarÄ±

### Fonksiyonel Testler
âœ… **Personel CRUD Ä°ÅŸlemleri**
- Create: Form validation + baÅŸarÄ±lÄ± kayÄ±t
- Read: Liste ve detay gÃ¶rÃ¼ntÃ¼leme
- Update: Bilgi gÃ¼ncelleme + validation
- Delete: Silme iÅŸlemi + onay

âœ… **Departman CRUD Ä°ÅŸlemleri**
- Create: Parent departman seÃ§imi ile
- Read: HiyerarÅŸik liste + aÄŸaÃ§ gÃ¶rÃ¼nÃ¼mÃ¼
- Update: HiyerarÅŸi deÄŸiÅŸikliÄŸi + validation
- Delete: Alt departman/personel kontrolÃ¼ ile

âœ… **Ä°ÅŸ KuralÄ± Testleri**
- TC Kimlik No uniqueness kontrolÃ¼
- Departman circular reference engeli
- Soft delete (aktif/pasif) iÅŸlemleri
- Foreign key constraint testleri

âœ… **UI/UX Testleri**
- Responsive design (mobil/tablet/desktop)
- Form validation mesajlarÄ±
- Success/error notification'larÄ±
- Navigation menu iÅŸlevselliÄŸi

### Performans Testleri
âœ… **Veri YÃ¼kleme Testleri**
- 100 personel listesi: ~80ms
- 50 departmanlÄ± hiyerarÅŸi: ~120ms
- Detay sayfasÄ± yÃ¼kleme: ~60ms

## ğŸš€ Deployment Bilgileri

### Gereksinimler
- .NET 8.0 SDK
- SQL Server LocalDB (veya SQL Server)
- IIS Express (Development)

### Kurulum AdÄ±mlarÄ±
```bash
# 1. Repository clone
git clone [repository-url]

# 2. Dependencies restore
dotnet restore

# 3. Database oluÅŸturma (otomatik)
# Program.cs iÃ§inde EnsureCreated() metodu

# 4. Proje Ã§alÄ±ÅŸtÄ±rma
cd MVC
dotnet run --urls "http://localhost:5000"
```

### KonfigÃ¼rasyon
```json
// appsettings.json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=.;Database=IKYS;Trusted_Connection=True;TrustServerCertificate=True;"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information"
    }
  }
}
```

## ğŸ”® Gelecek PlanlarÄ±

### Ã–ncelikli Ä°yileÅŸtirmeler
1. **Migration Sistemi:** EnsureCreated() yerine Migration kullanÄ±mÄ±
2. **FluentValidation:** Model validation iÃ§in entegrasyon
3. **Authentication/Authorization:** KullanÄ±cÄ± yÃ¶netimi eklenmesi
4. **Unit Testing:** Comprehensive test coverage
5. **Logging:** Structured logging implementasyonu

### Performans Ä°yileÅŸtirmeleri
1. **Caching:** Memory/Redis cache stratejisi
2. **Pagination:** BÃ¼yÃ¼k veri setleri iÃ§in sayfalama
3. **Lazy Loading:** Navigation property'ler iÃ§in
4. **Query Optimization:** N+1 problem Ã§Ã¶zÃ¼mÃ¼

### UI/UX Ä°yileÅŸtirmeleri
1. **Advanced Filtering:** Multi-column search
2. **Bulk Operations:** Toplu iÅŸlemler
3. **Export Features:** Excel/PDF export
4. **Real-time Updates:** SignalR entegrasyonu

## ğŸ“‹ Bilinen Limitasyonlar

### Teknik Limitasyonlar
- Migration sistemi aktif deÄŸil (EnsureCreated kullanÄ±lÄ±yor)
- FluentValidation entegrasyonu eksik
- Authentication/Authorization yok
- Unit test coverage %0
- API endpoint'leri yok

### Ä°ÅŸ KuralÄ± LimitasyonlarÄ±
- Personel geÃ§miÅŸi takibi yok
- Departman deÄŸiÅŸiklik loglarÄ± yok
- Bulk import/export Ã¶zelliÄŸi yok
- Advanced search ve filtreleme sÄ±nÄ±rlÄ±

### Performans LimitasyonlarÄ±
- BÃ¼yÃ¼k veri setleri iÃ§in pagination yok
- Caching stratejisi yok
- Database connection pooling optimize edilmedi

## ğŸ“ SonuÃ§ ve Ã–neriler

### BaÅŸarÄ±yla Tamamlanan
âœ… **Temel CRUD Ä°ÅŸlemleri:** Her iki modÃ¼l iÃ§in tam implementasyon  
âœ… **HiyerarÅŸik YapÄ±:** Departman parent-child iliÅŸkisi  
âœ… **Repository Pattern:** Clean architecture implementasyonu  
âœ… **Result Pattern:** TutarlÄ± hata yÃ¶netimi  
âœ… **AutoMapper:** Katmanlar arasÄ± mapping  
âœ… **Responsive UI:** Bootstrap 5 ile modern arayÃ¼z  

### Sonraki AdÄ±mlar
1. **Migration Sistemine GeÃ§iÅŸ** (YÃ¼ksek Ã–ncelik)
2. **Authentication ModÃ¼lÃ¼** (YÃ¼ksek Ã–ncelik)
3. **Unit Test YazÄ±mÄ±** (Orta Ã–ncelik)
4. **Performance Optimization** (Orta Ã–ncelik)
5. **Advanced Features** (DÃ¼ÅŸÃ¼k Ã–ncelik)

### Genel DeÄŸerlendirme
Proje temel gereksinimleri karÅŸÄ±layacak ÅŸekilde baÅŸarÄ±yla geliÅŸtirilmiÅŸtir. Kod kalitesi yÃ¼ksek, mimari temiz ve geniÅŸletilebilir yapÄ±dadÄ±r. Ãœretim ortamÄ±na geÃ§meden Ã¶nce yukarÄ±da belirtilen limitasyonlarÄ±n giderilmesi Ã¶nerilir.

---

**Rapor HazÄ±rlayan:** Ä°KYS Development Team  
**Ä°letiÅŸim:** [Proje Sahibi]  
**Son GÃ¼ncelleme:** 28 AÄŸustos 2025, 20:50

---

## ğŸ“ Ekler

### A. Kod Ã–rnekleri
[Bu bÃ¶lÃ¼m isteÄŸe baÄŸlÄ± olarak geniÅŸletilebilir]

### B. Ekran GÃ¶rÃ¼ntÃ¼leri
[Screenshots/ klasÃ¶rÃ¼nde saklanacak]

### C. VeritabanÄ± ÅemasÄ±
[Architecture/ klasÃ¶rÃ¼nde ER diyagramlarÄ±]

### D. API DokÃ¼mantasyonu
[Gelecekte API eklendikinde]
